# MFSTree
分布式文件系统技术研究

<pre>
          MooseFS是一款分布式网络文件系统。它把数据分散在多台服务器上，但对于用户来说，看
      到的只是一个源。MFS也像其他类unix文件系统一样，包含了层级结构（目录树）,存储着文件
      属性（权限，最后访问时间，修改时间），可以创建特殊的文件（块设备，字符设备，管道，
      套接字），符号链接，硬链接。
</pre>

<pre>
MFS的特征
        1）层级结构：目录树
        2）存储文件属性（权限，访问和修改时间）
        3）支持特殊文件（块设备，字符设备，管道）
        5）符号链接，软硬链接
        6）对文件系统访问可以通过IP地址或者密码进行访问
        7）高可靠：数据的多个拷贝存储在不同的计算机上
        8）通过附加新的计算机或者硬盘可以实现容量的动态拓展
        9）删除文件可以根据一个可配置的时间周期进行保留
        10）不受访问和写入影响的文件连贯快照。
</pre>

<pre>
MFS的应用场景：
      1）大规模高并发的数据存储及访问，小文件，大文件
      2）大规模的数据处理，如日志分析
</pre>

![](https://i.imgur.com/qtdrEJ9.png)

<pre>
部署方案：
        MFS是一种分布式文件系统，包括4种角色
           1）管理服务器
              负责各个数据存储服务器的管理，文件读写调度，文件空间回收以及恢复 多节点拷贝
           2）元数据日志服务器
              负责备份master服务器的变化日志文件，文件类型为changelog_ml.*.mfs，以便在
              master服务器出现问题的时候接替其工作。
           3）数据存储服务器
              听从管理服务调度，提供存储空间，并为客户提供数据传输。真正存储用户数据的服务
              器。存储文件时，首先把文件分成块，然后这些块在数据服务器chunkserver之间复制
              ，数据服务器可以是多个，并且数量越多，可使用的磁盘空间越大，可靠性越高。
           5）客户机挂载
              客户端挂载远程mfs服务器共享出的存储并使用。通过fuse内核接口挂载进程管理服务
              器上所管理的数据存储服务器共享出的硬盘。共享的文件系统的用法和nfs相似，使用
              mfs文件系统来存储和访问的主机称为MFS的客户端。
</pre>

<pre>
MFS内部的运行机制
      1：客户端请求访问存储，请求发送到了MFS Master
      2：MFS Master根据我们的请求，查询所需要的文件分布在那些服务器上
      3：客户端直接和存储服务器进行数据存储和读写
</pre>

###MFS与FastDFS对比

![](https://i.imgur.com/jC3KsNZ.png)



